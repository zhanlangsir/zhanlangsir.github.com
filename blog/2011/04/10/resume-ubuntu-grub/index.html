
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ubuntu10.10+win7双系统重装win7后恢复ubuntu引导方法 - 挨踢人生</title>
  <meta name="author" content="zhanlang">

  
  <meta name="description" content=" 
起因:
虽然一直在ubuntu下工作,但是前几天突然发现dreamweaver有wordpress的代码提示功能,让小狼心动不已,所以就打算在一直当成游戏机的win7上去搭建iis的php环境,鼓捣了一阵子后….悲剧地发现竟然无法打开was服务,说是找不到这个服务,百度,google了一阵， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zhanlangsir.github.com/blog/2011/04/10/resume-ubuntu-grub/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="挨踢人生" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">挨踢人生</a></h1>
  
    <h2>做一个有思想的人</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:zhanlangsir.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">ubuntu10.10+win7双系统重装win7后恢复ubuntu引导方法</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-10T00:00:00+08:00" pubdate data-updated="true">Apr 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


<div class="entry-content"><p> 
<strong style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; padding: 0px; margin: 0px; border: 0px initial initial;"><u>起因:</u></strong>
虽然一直在ubuntu下工作,但是前几天突然发现dreamweaver有<span style="color: #787878;"><span style="outline-style: initial; outline-color: initial;">wordpress</span></span>的代码提示功能,让小狼心动不已,所以就打算在一直当成游戏机的win7上去搭建iis的php环境,鼓捣了一阵子后….悲剧地发现竟然无法打开was服务,说是找不到这个服务,百度,google了一阵，发现只有两个办法，尝试了一下都不成功，没办法.只能选择重装了,正好装个<span style="color: #787878;"><span style="outline-style: initial; outline-color: initial;">windows</span></span> server 2008感觉感觉服务器版的windows有什么优点。</p>

<p>装完server 2008之后重启就更加悲剧地发现grub启动菜单不见了….不是重装了windows之后又要重装ubuntu吧….配置了好久的说,OMG!小狼决定说什么也不能重装ubuntu，就虚心地向google求救,经过一段时间的折腾,终于成功引导回ubuntu。现在就说说一下引导过程吧,注意了小狼用的是liveCD方法,就是装系统时用的光盘,没有的童鞋可以跳过了，当然想参考一下的也可以继续往下看,另外这里使用的是grub2.即1.98及更新的版本，老版本的grub没试过，原理应该相差不大。
<strong style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; padding: 0px; margin: 0px; border: 0px initial initial;">恢复引导方法：</strong>
1.放进liveCD,重启,看到有界面出来的时候,选择试用,不要点安装。<!--more-->
2.进入ubuntu试用版后,打开终端,在左上角的<span style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; color: #ff0000; padding: 0px; margin: 0px; border: 0px initial initial;">应用程序->附件->终端</span>那
3.输入以下命令:
sudo fdisk -l   //得到的结果类似下面。查看ubuntu的根目录在那,这里没办法直接看出来,只能靠你自己识别,可以从分区的大小判断是不是根分区，就是在装ubuntu时，挂载点为 <span style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; color: #ff0000; padding: 0px; margin: 0px; border: 0px initial initial;">/ </span>的那个分区
<a href="http://www.aitilife.com/images/uploads/2011/04/fdisk.png"><img class="alignnone size-medium wp-image-1509" title="fdisk" src="http://www.aitilife.com/images/uploads/2011/04/fdisk-300x127.png" alt="" width="300" height="127"></a>
从图中的结果看出来，根分区在sda12.因为小狼记得分/分区的时候是分了20G的大小，并且当时是先分了/分区，然后再分了一个20G的/home分区的。所以判断出sda12是/分区，而不是sda13，虽然它也是20G.把sda12记住。</p>

<p><strong style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; padding: 0px; margin: 0px; border: 0px initial initial;"><span style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; color: #ff0000; padding: 0px; margin: 0px; border: 0px initial initial;">注意：<span style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; color: #000000; padding: 0px; margin: 0px; border: 0px initial initial;">如果</span></span><span style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; color: #000000; padding: 0px; margin: 0px; border: 0px initial initial;">分区的时候，你单独把boot分区分出来了，</span></strong><strong style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; padding: 0px; margin: 0px; border: 0px initial initial;"><span style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; color: #000000; padding: 0px; margin: 0px; border: 0px initial initial;">还要多一步工作，就是找出boot分区:</span></strong>
从上图可以看出,boot分区在sda8，因为它是最小的，只有200M.（你装ubuntu的时候分了多少就是多少）
记住sda8。
sudo mount /dev/你的/根分区所在位置 /mnt
5.输入
sudo grub-install –root-directory=/mnt /dev/sda
这里应该不会有什么问题，因为如果位置不对，无法安装，你可以一直输这个命令直到位置对了为止.</p>

<p>6.如果出现了no error report。那你就差不多成功了.然后sudo init 6.重启。
7.重启之后你会无奈地发现……windows也无法启动了，进入的是grub的命令行…..不要怕。进到这里你已经离成功不远了.
输入:
root (hdX,Y）   //x为硬盘位置，如果你只有一快硬盘,X=0,如果有多块，相应设置x。Y为boot分区所在位置,这里是8.如果没有单独分boot分区,y就是你的/分区所在位置
<a style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; text-decoration: none; color: #787878; padding: 0px; margin: 0px; border: 0px initial initial;" title="linux" href="http://www.aitilife.com/category/operating-system/linux">linux</a> /vmlinuz-2.xxxxx-generic root=/dev/sda12(无论你有没有把boot分区单独分出来,这里都要写/根分区的位置，否则无法完成启动,这里可以按tab完成填写)
如果没有单独把boot分区分出来，就是
linux /boot/vmlinuz-2.xxxxx-generic root=/dev/sda12
然后输入：
initrd /initrd.img-2.xxxxx-generic
或
initrd /boot/initrd.img-2.xxxxx-generic(无单独boot分区的情况)
最后
boot</p>

<hr style="margin-bottom: 1.5em; height: 4px; background-color: #333333; border: 1px dotted #666666;">到这里已经差不多完成了.因为你已经可以进入原来的ubuntu了，但是如果就这样不管了，那么下一次重启还需要重复一次上面的工作。这也太渗人了。。。


<p>那最后就修复一下grub吧.
打开终端,输入
sudo update-grub
看到
Generating grub.cfg …
Found linux image: /boot/vmlinuz-2.6.35-27-generic
Found initrd image: /boot/initrd.img-2.6.35-27-genericFound Windows Server 2008 (loader) on /dev/sda1
done
恭喜，现在已经全线完工了。赶快重启一下看看熟悉的grub引导菜单是不是回来了～</p>

<hr style="margin-bottom: 1.5em; height: 4px; background-color: #333333; border: 1px dotted #666666;">


<p><strong style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; padding: 0px; margin: 0px; border: 0px initial initial;">后记：</strong>
后来又发现了一个神奇的现象…..原本上网的时候每次网络连接哪里都显示断开的,可是我确实可以上网,不过这样用evolution的时候只能在离线模式下使用,相当于没用勒,这次折腾了grub后再登录,神奇地发现网络连接竟然连上了……这是肿么回事呢?内牛满面中……算了.先设置一下evolution再继续流吧!无图无真相,最后上个图:
<a href="http://www.aitilife.com/images/uploads/2011/04/lan.png"><img class="alignnone size-full wp-image-1512" title="lan" src="http://www.aitilife.com/images/uploads/2011/04/lan.png" alt="" width="213" height="55"></a>
关于grub更详细的资料可以看看小狼以前的文章:<a style="outline-width: 0px; outline-style: initial; outline-color: initial; font-size: 14px; text-decoration: none; color: #787878; padding: 0px; margin: 0px; border: 0px initial initial;" href="http://www.aitilife.com/how-to-decrease-grub-menu-item-in-ubuntu/">http://www.aitilife.com/how-to-decrease-grub-menu-item-in-ubuntu/</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">zhanlang</span></span>

      








  


<time datetime="2011-04-10T00:00:00+08:00" pubdate data-updated="true">Apr 10<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>Linux</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/04/10/resolve-vim-chinese-garbled/" title="Previous Post: 解决VIM中文乱码">&laquo; 解决VIM中文乱码</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/04/10/san-bu-gao-ding-fedora-linux-xia-rhythmbox-zhong-wen-xian-shi-luan-ma-de-wen-ti/" title="Next Post: 三步搞定Fedora Linux下Rhythmbox中文显示乱码的问题">三步搞定Fedora Linux下Rhythmbox中文显示乱码的问题 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/12/23/qtqq-v070-beta/">Qtqq v0.7.0-beta</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/23/about-qtqq0-8-0-alpha/">关于qtqq0.8.0-alpha</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/20/typecho-rewrite-rule/">typecho rewrite 规则</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/20/sae-wordpress--zhuan--typecho/">sae wordpress 转 typecho</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/20/linux-visual-diff-tool/">linux可视化差异比较工具 meld</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/zhanlangsir">@zhanlangsir</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'zhanlangsir',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - zhanlang -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
